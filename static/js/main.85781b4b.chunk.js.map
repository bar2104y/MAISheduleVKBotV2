{"version":3,"sources":["App.js","index.js"],"names":["Example","props","closePopout","bind","SendMessage","go","bridge","send","subscribe","detail","type","data","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","console","log","setState","user","state","activeView","popout","messageToAdmin","userData","group","notification","text","e","this","actions","title","autoclose","mode","action","openAlert","onClose","activePanel","id","before","photo_200","src","description","city","first_name","last_name","onClick","left","top","placeholder","onChange","target","size","name","checked","React","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.85781b4b.chunk.js","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\n//import ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport { Root, View, Panel, PanelHeader,PanelHeaderBack} from '@vkontakte/vkui';\nimport { Group,Div,Button,Cell,CellButton,Avatar} from '@vkontakte/vkui';\nimport { FormLayout, Textarea, Radio,Input} from '@vkontakte/vkui';\nimport { Alert } from '@vkontakte/vkui';\n\nclass Example extends React.Component {\n    constructor(props) {\n\t\tsuper(props);\n\n\t\tthis.closePopout = this.closePopout.bind(this);\n\t\tthis.SendMessage = this.SendMessage.bind(this);\n\t\tthis.go = this.go.bind(this)\n\n\t\tbridge.send(\"VKWebAppInit\", {});\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t} else if(type==='VKWebAppGetUserInfoResult'){\n\t\t\t\tconsole.log('Get usr data');\n\t\t\t\tthis.setState({user:data})\n\t\t\t} else {\n\t\t\t\tconsole.log(type,data)\n\t\t\t}\n\t\t});\n\n\t\tbridge.send(\"VKWebAppGetUserInfo\", {});\n\n\t\tthis.state = {\n\t\t\tactiveView: 'Home',\n\t\t\tpopout: null,\n\t\t\tuser: {},\n\t\t\tmessageToAdmin: null,\n\t\t\tuserData: {\n\t\t\t\tgroup: 'М8О-228В-19',\n\t\t\t\tnotification:true,\n\t\t\t},\n\t\t}\t \n\t}\n\n\tSendMessage(text){\n\t\tconsole.log(text);\n\t}\n\n\tgo (e) {this.setState({ activeView:e})};\n\n\topenAlert(type){\n\t\tif (type === 'SendMessage'){\n\t\t\tthis.setState({ popout:\n\t\t\t\t<Alert\n\t\t\t\t  actions={[{\n\t\t\t\t\ttitle: 'Отмена',\n\t\t\t\t\tautoclose: true,\n\t\t\t\t\tmode: 'cancel'\n\t\t\t\t  }, {\n\t\t\t\t\ttitle: 'Отправить',\n\t\t\t\t\tautoclose: true,\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tthis.SendMessage(this.state.messageToAdmin);\n\t\t\t\t\t\tthis.setState({messageToAdmin:null})\n\t\t\t\t\t\tthis.go('Home');\n\t\t\t\t\t\tthis.openAlert('MessageOK')\n\t\t\t\t\t},\n\t\t\t\t  }]}\n\t\t\t\t  onClose={this.closePopout}\n\t\t\t\t>\n\t\t\t\t  <h2>Сообщение админу</h2>\n\t\t\t\t  <p>Отправить сообщение админимстратору:</p>\n\t\t\t\t  <Div>{this.state.messageToAdmin}</Div>\n\t\t\t\t</Alert>\n\t\t\t  });\n\t\t} else if(type==='DelAllAboutUser'){\n\t\t\tthis.setState({ popout:\n\t\t\t\t<Alert\n\t\t\t\t  actions={[{\n\t\t\t\t\ttitle: 'Отмена',\n\t\t\t\t\tautoclose: true,\n\t\t\t\t\tmode: 'cancel'\n\t\t\t\t  }, {\n\t\t\t\t\ttitle: 'Удалить',\n\t\t\t\t\tautoclose: true,\n\t\t\t\t\tmode: 'destructive',\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tlet text = 'Удаление всех данных о пользователе';\n\t\t\t\t\t\tthis.SendMessage(text);\n\t\t\t\t\t},\n\t\t\t\t  }]}\n\t\t\t\t  onClose={this.closePopout}\n\t\t\t\t>\n\t\t\t\t  <h2>Удаление данных</h2>\n\t\t\t\t  <p>Вы уверены, что хотите удалить все данные? Сообщения приходить не будут</p>\n\t\t\t\t</Alert>\n\t\t\t});\n\t\t} else if ( type === 'MessageOK'){\n\t\t\tthis.setState({ popout:\n\t\t\t\t<Alert\n\t\t\t\t\tactions={[{\n\t\t\t\t\ttitle: 'Замечательно',\n\t\t\t\t\tautoclose: true,\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tthis.closePopout();\n\t\t\t\t\t},\n\t\t\t\t\t}]}\n\t\t\t\t\tonClose={this.closePopout}\n\t\t\t\t>\n\t\t\t\t\t<h2>Сообщение отправлено</h2>\n\t\t\t\t</Alert>\n\t\t\t});\n\t\t}\n\t}\n\n\tclosePopout () {\n\t\tthis.setState({ popout: null });\n\t  }\n\n\n\trender() {\n      return (\n        <Root activeView={this.state.activeView}>\n        \t<View popout={this.state.popout} activePanel=\"Home\" id=\"Home\">\n\t\t\t\t<Panel id=\"Home\">\n\t\t\t\t\t<PanelHeader>Расписание МАИ</PanelHeader>\n\t\t\t\t\t<Group>\n\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\tbefore={this.state.user.photo_200 ? <Avatar src={this.state.user.photo_200}/> : null}\n\t\t\t\t\t\t\tdescription={this.state.user.city && this.state.user.city.title ? this.state.user.city.title : ''}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tДратути, {`${this.state.user.first_name} ${this.state.user.last_name}`}\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t</Group>\n\t\t\t\t\t<Group>\n\t\t\t\t\t\t<CellButton onClick={()=>this.go('EditSettings')} >Редактировать настроечки</CellButton>\n\t\t\t\t\t\t<CellButton onClick={()=>this.go('Message')} >Отправить сообщение одмену</CellButton>\n\t\t\t\t\t</Group>\n\t\t\t\t\t<Group><CellButton mode=\"danger\" onClick={()=>this.openAlert('DelAllAboutUser')}>Удалить все про меня</CellButton></Group>\n\t\t\t\t\t\n\t\t\t\t</Panel>\n\t\t\t</View>\n\t\t\t<View popout={this.state.popout} activePanel=\"Message\" id=\"Message\">\n\t\t\t\t<Panel id=\"Message\">\n\t  \t\t\t\t<PanelHeader left={<PanelHeaderBack onClick={()=>this.go('Home')}></PanelHeaderBack>} >Сообщение одмену</PanelHeader>\n\t\t\t\t\t<Group>\n\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\ttop=\"Сообщение\"\n\t\t\t\t\t\t\t\tvalue={this.state.messageToAdmin}\n\t\t\t\t\t\t\t\tplaceholder=\"Одмен, все плохо, удались из интернета\"\n\t\t\t\t\t\t\t\tonChange={(e) => this.setState({ messageToAdmin: e.target.value})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button size=\"xl\" mode=\"commerce\" onClick={()=> this.openAlert('SendMessage')}>Отправить</Button>\n\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t\t\n\t\t\t\t\t</Group>\n\t\t\t\t</Panel>\n\t\t\t</View>\n\t\t\t<View popout={this.state.popout} activePanel=\"EditSettings\" id=\"EditSettings\">\n\t\t\t\t<Panel id=\"EditSettings\">\n\t  \t\t\t\t<PanelHeader left={<PanelHeaderBack onClick={()=>this.go('Home')}></PanelHeaderBack>} >Редактирование настроек</PanelHeader>\n\t\t\t\t\t  <Group title=\"Functions\">\n\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttop=\"Ваша группа\"\n\t\t\t\t\t\t\t\tplaceholder=\"М7О-100С-20\"\n\t\t\t\t\t\t\t\tvalue={this.state.userData.group}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Radio\n\t\t\t\t\t\t\t\tname=\"type\"\n\t\t\t\t\t\t\t\tchecked={this.state.userData.notification}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tВключить уведомления\n\t\t\t\t\t\t\t</Radio>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t</Group>\n\t\t\t\t</Panel>\n\t\t\t</View>\n\t\t</Root>\n      )\n    }\n  }\n  \n\nexport default Example;\n\n/*const App = () => {\n\tconst [activePanel, setActivePanel] = useState('home');\n\tconst [this.state.user, setUser] = useState(null);\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\n\tuseEffect(() => {\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tsetUser(user);\n\t\t\tsetPopout(null);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\tconst go = e => {\n\t\tsetActivePanel(e.currentTarget.dataset.to);\n\t};\n\n\n\treturn (\n\t\t<View activePanel={activePanel} popout={popout}>\n\t\t\t<Home id='home' this.state.user={this.state.user} go={go} />\n\t\t\t<Persik id='persik' go={go} />\n\t\t</View>\n\t);\n}\n\nexport default App;*/\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport Example from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<Example />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}